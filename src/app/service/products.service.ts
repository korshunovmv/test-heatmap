import { Injectable } from '@angular/core';
import { Routes } from '@angular/router';
import { BehaviorSubject } from 'rxjs';

import { AppService } from 'app/service/app.service';

@Injectable()
export class ProductsService {
    accounts: BehaviorSubject<any[]> = new BehaviorSubject(null);
    cards: BehaviorSubject<any[]> = new BehaviorSubject(null);
    externalCards: BehaviorSubject<any[]> = new BehaviorSubject(null);
    deposits: BehaviorSubject<any[]> = new BehaviorSubject(null);
    loans: BehaviorSubject<any[]> = new BehaviorSubject(null);

    externalCardsStr = '[{"id":40507136,"pan":"548386******0559","name":"4444","expDate":"02/21","bindDate":"11.02.2020","storedId":40507136,"paymentSystem":"MC"}, {"id":40507134,"pan":"510070******0097","name":"33333","expDate":"11/23","bindDate":"11.02.2020","storedId":40507134,"paymentSystem":"MC"},{"id":40507061,"pan":"557057******9697","name":"22222","expDate":"12/20","bindDate":"11.02.2020","storedId":40507061,"paymentSystem":"MC"},{"id":40506988,"pan":"532130******0174","name":"111111","expDate":"02/20","bindDate":"11.02.2020","storedId":40506988,"paymentSystem":"MC"},{"id":40506985,"pan":"676454******0966","name":"нага","expDate":"11/22","bindDate":"11.02.2020","storedId":40506985,"paymentSystem":"MAESTRO"},{"id":40506912,"pan":"220096******2993","name":"на6а0822","expDate":"08/22","bindDate":"11.02.2020","storedId":40506912,"paymentSystem":"MIR"},{"id":39920857,"pan":"519261******3242","name":"Мандаринка","expDate":"05/24","bindDate":"29.01.2020","storedId":39920857,"paymentSystem":"MC"},{"id":39619671,"pan":"427939******6009","name":"Карта ноунейм банка","expDate":"01/22","bindDate":"21.01.2020","storedId":39619671,"paymentSystem":"VISA"},{"id":20413256,"pan":"448511******8381","name":"American Express g","expDate":"04/23","bindDate":"24.04.2019","storedId":20413256,"paymentSystem":"VISA"},{"id":13876285,"pan":"220048******0007","name":"p2p 702","expDate":"02/22","bindDate":"04.03.2020","storedId":13876285,"paymentSystem":"MIR"},{"id":13876284,"pan":"220140******2467","name":"p2p 952","expDate":"01/22","bindDate":"16.01.2020","storedId":13876284,"paymentSystem":"MIR"}]';

    cardsStr =
      '['+
        '{"id":"4431197","state_description":"Действующая","blocked":false,"name":"MasterCard Unembossed","customName":false,"amount":2.00,"currency":"RUB","pan":"548386******7327","cardholderName":"IR479546 SI479546","category":"card","expDate":"2025-03-31","balance":2.00,"availableBalance":2.00,"holdAmount":0.00,"primaryAccount":"40817810100016265963","accountId":45483452,"tariffLink":"","order":"99","primary":true,"cardId":"4431197","brand":"MasterCard Unembossed","storedId":45484029,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":2.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79326005555","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"off","packageServ":false,"paymentSystem":"MC","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"23801","design_front_url":"/export/card/design?code=23801&side=front","design_back_url":"/export/card/design?code=23801&side=back","textColor":null,"canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":true,"smsNotify":60.00,"highCashBack":30.00,"freeWithdraw":30.00,"canViewCvv2":true},'+
        '{"id":"4429271","state_description":"Действующая","blocked":false,"name":"MasterCard Unembossed","customName":true,"amount":0.00,"currency":"RUB","pan":"549071******7165","cardholderName":"","category":"card","expDate":"2025-03-31","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810300016255650","accountId":45132824,"tariffLink":"/export/attachment/everyday_card?plain=1","order":"99","primary":true,"cardId":"4429271","brand":"Mastercard Gold","storedId":45132897,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79995555555","smsType":null,"packageCashBack":"off","packageFreeCashOut":"off","packageServ":true,"paymentSystem":"MC","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"73001","design_front_url":"/export/card/design?code=73001&side=front","design_back_url":"/export/card/design?code=73001&side=back","textColor":"white","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":true,"smsNotify":30.00,"highCashBack":30.00,"freeWithdraw":30.00,"canViewCvv2":false},'+
        '{"id":"4429227","state_description":"Действующая","blocked":false,"name":"VISA VIRTUON","customName":false,"amount":0.00,"currency":"RUB","pan":"488951******5784","cardholderName":"IR479546 SI479546","category":"card","expDate":"2020-09-30","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810010224076209","accountId":45360497,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429227","brand":"VISA VIRTUON","storedId":45369025,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79326005555","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":true},'+
        '{"id":"4429225","state_description":"Действующая","blocked":false,"name":"Visa Virtuon","customName":false,"amount":0.00,"currency":"RUB","pan":"488951******1048","cardholderName":"IR479546 SI479546","category":"card","expDate":"2020-09-30","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810110224076206","accountId":45160344,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429225","brand":"Visa Virtuon","storedId":45160345,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79995555555","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":true},'+
        '{"id":"4429224","state_description":"Действующая","blocked":false,"name":"Visa Virtuon","customName":false,"amount":0.00,"currency":"RUB","pan":"488951******8070","cardholderName":"IR479546 SI479546", "category":"card","expDate":"2020-09-30","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810810224076205","accountId":45119576,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429224","brand":"Visa Virtuon","storedId":45119577,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79995555555","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":true},'+
        '{"id":"4429223","state_description":"Действующая","blocked":false,"name":"Visa Virtuon","customName":false,"amount":0.00,"currency":"RUB","pan":"488951******6793","cardholderName":"IR479546 SI479546","category":"card","expDate":"2020-09-30","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810510224076204","accountId":45119573,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429223","brand":"Visa Virtuon","storedId":45119574,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79995555555","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":true},'+
        '{"id":"4429220","state_description":"Действующая","blocked":false,"name":"Visa Virtuon","customName":false,"amount":5.00,"currency":"RUB","pan":"488951******7681","cardholderName":"IR479546 SI479546","category":"card","expDate":"2020-09-30","balance":5.00,"availableBalance":5.00,"holdAmount":0.00,"primaryAccount":"40817810610224076201","accountId":43919924,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429220","brand":"Visa Virtuon","storedId":43919925,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":5.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79655474308","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":true},'+
        '{"id":"4429218","state_description":"Действующая","blocked":false,"name":"Visa Virtuon","customName":false,"amount":0.00,"currency":"RUB","pan":"488951******5233","cardholderName":"IR479546 SI479546","category":"card","expDate":"2020-09-30","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810010224076199","accountId":43912673,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429218","brand":"Visa Virtuon","storedId":43912719,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79655474308","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":false},'+
        '{"id":"4429217","state_description":"Действующая","blocked":false,"name":"Visa Virtuon","customName":false,"amount":0.00,"currency":"RUB","pan":"488951******9488","cardholderName":"IR479546 SI479546","category":"card","expDate":"2020-09-30","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810710224076198","accountId":43911986,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429217","brand":"Visa Virtuon","storedId":43912098,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79655474308","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":false},'+
        '{"id":"4429216","state_description":"Действующая","blocked":false,"name":"Visa Virtuon","customName":false,"amount":0.00,"currency":"RUB","pan":"488951******8886","cardholderName":"IR479546 SI479546","category":"card","expDate":"2020-09-30","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810510224075865","accountId":43799860,"tariffLink":"https://landings.skbbank.ru/tarifs/standard","order":"99","primary":true,"cardId":"4429216","brand":"Visa Virtuon","storedId":43799861,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79655474308","smsType":"SMS","packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"VISA","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"10000","design_front_url":"/export/card/design?code=10000&side=front","design_back_url":"/export/card/design?code=10000&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":false},'+
        '{"id":"4429182","state_description":"Действующая","blocked":false,"name":"MasterCard Gold","customName":true,"amount":0.00,"currency":"RUB","pan":"549071******7488","cardholderName":"","category":"card","expDate":"2025-03-31","balance":0,"availableBalance":0,"holdAmount":0.00,"primaryAccount":"40817810000016246820","accountId":42814336,"tariffLink":"/export/attachment/everyday_card?plain=1","order":"99","primary":true,"cardId":"4429182","brand":"Mastercard Gold","storedId":42814337,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":0.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79655474308","smsType":null,"packageCashBack":"off","packageFreeCashOut":"off","packageServ":true,"paymentSystem":"MC","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"73001","design_front_url":"/export/card/design?code=73001&side=front","design_back_url":"/export/card/design?code=73001&side=back","textColor":"white","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":true,"smsNotify":30.00,"highCashBack":30.00,"freeWithdraw":30.00,"canViewCvv2":false},'+
        '{"id":"4429181","state_description":"Действующая","blocked":false,"name":"Mastercard Gold","customName":false,"amount":268177.00,"currency":"RUB","pan":"549071******3640","cardholderName":"","category":"card","expDate":"2025-03-31","balance":268177.00,"availableBalance":268177.00,"holdAmount":0.00,"primaryAccount":"40817810600016246806","accountId":42785820,"tariffLink":"/export/attachment/everyday_card?plain=1","order":"99","primary":true,"cardId":"4429181","brand":"Mastercard Gold","storedId":42786733,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":268177.00,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79655474308","smsType":null,"packageCashBack":"off","packageFreeCashOut":"off","packageServ":true,"paymentSystem":"MC","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"73001","design_front_url":"/export/card/design?code=73001&side=front","design_back_url":"/export/card/design?code=73001&side=back","textColor":"white","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":true,"smsNotify":30.00,"highCashBack":30.00,"freeWithdraw":30.00,"canViewCvv2":false},'+
        '{"id":"4156677","state_description":"Действующая","blocked":false,"name":"MIR DEBIT 1","customName":true,"amount":2432.93,"currency":"RUB","pan":"220048******6777","cardholderName":"IR4156677","category":"card","expDate":"2023-11-30","balance":2449.43,"availableBalance":2432.93,"holdAmount":0.00,"primaryAccount":"40817810500202337629","accountId":13517852,"tariffLink":"","order":"99","primary":true,"cardId":"4156677","brand":"Mir Debit","storedId":24183877,"limits":[],"status":"00","status_desc":"Карта не блокирована","state":"2","kind":"debit","loan_funds":0.00,"own_funds":2432.93,"used_loan_funds":0.00,"most_active":false,"smsPhone":"79000000000","smsType":null,"packageCashBack":"forbidden","packageFreeCashOut":"forbidden","packageServ":false,"paymentSystem":"MIR","limit_set_available":false,"own_customer_card":false,"holder_name":"","design_id":"33002","design_front_url":"/export/card/design?code=33002&side=front","design_back_url":"/export/card/design?code=33002&side=back","textColor":"black","canUnlock":false,"canReissue":false,"canAddCard":false,"contactless":false,"smsNotify":0,"highCashBack":30.00,"freeWithdraw":0,"canViewCvv2":false}'+
      ']';

      // '{"id":45315888,"customName":true,"name":"Счет MasterCard - Бонусный","productName":"Счет MasterCard Unembossed","number":"40817810600016255664","state":"Открыт","stateCode":"open","amount":503.00,"type":"current","registryAmount":0,"registry2Amount":0,"balance":503.00,"currency":"RUB","availableBalance":503.00,"availBalanceRub":503.00,"startDate":"16.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":true,"pdfLink":"/export/account/pdf?id=45315888","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":150.00,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45315846},'+
      // '{"id":45483452,"customName":false,"name":"Счет MasterCard Unembossed","productName":"Счет MasterCard Unembossed","number":"40817810100016265963","state":"Открыт","stateCode":"open","amount":2.00,"type":"card","registryAmount":0,"registry2Amount":0,"balance":2.00,"currency":"RUB","availableBalance":2.00,"availBalanceRub":2.00,"startDate":"17.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=45483452","overdraft":false,"sbpDefault":false,"bonusProgramState":"enabled","availableBonuses":0,"accruedBonuses":150.00,"nextAccrualDate":"2020-05-01","lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45483408,"cards":[45484029]},'+
      // '{"id":45480197,"customName":false,"name":"Счет MasterCard Unembossed","productName":"Счет MasterCard Unembossed","number":"40817810800016265962","state":"Открыт","stateCode":"open","amount":0.00,"type":"current","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0.00,"availBalanceRub":0.00,"startDate":"17.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=45480197","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":150.00,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45480192},'+
      // '{"id":45360497,"customName":true,"name":"Карта с cvv2","productName":"Счет VISA VIRTUON","number":"40817810010224076209","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"16.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=45360497","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45360476,"cards":[45369025]},'+
      // '{"id":45309714,"customName":false,"name":"Счет MasterCard Unembossed","productName":"Счет MasterCard Unembossed","number":"40817810300016255663","state":"Открыт","stateCode":"open","amount":0.00,"type":"current","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0.00,"availBalanceRub":0.00,"startDate":"16.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=45309714","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":150.00,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45309645},'+
      // '{"id":45308652,"customName":false,"name":"Счет MasterCard Unembossed","productName":"Счет MasterCard Unembossed","number":"40817810000016255662","state":"Открыт","stateCode":"open","amount":0.00,"type":"current","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0.00,"availBalanceRub":0.00,"startDate":"16.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=45308652","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":150.00,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45308589},'+
      // '{"id":45160344,"customName":false,"name":"Счет VISA VIRTUON","productName":"Счет VISA VIRTUON","number":"40817810110224076206","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"15.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=45160344","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45160339,"cards":[45160345]},'+
      // '{"id":45132824,"customName":false,"name":"Счет MasterCard Gold","productName":"Счет MasterCard Gold","number":"40817810300016255650","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"15.04.2020","order":99,"category":"account","requisites":{"bankName":"ФИЛИАЛ \"ДЕЛО\" ПАО \"СКБ-БАНК\"","address":"Куйбышева, 58","bic":"046577743","inn":"6608003052","kpp":"668543001","corrAccount":"30101810965770000743"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Карта на каждый день","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=45132824","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45132716,"cards":[45132897]},'+
      // '{"id":45119576,"customName":false,"name":"Счет VISA VIRTUON","productName":"Счет VISA VIRTUON","number":"40817810810224076205","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"15.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=45119576","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45119569,"cards":[45119577]},'+
      // '{"id":45119573,"customName":false,"name":"Счет VISA VIRTUON","productName":"Счет VISA VIRTUON","number":"40817810510224076204","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"15.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=45119573","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45119560,"cards":[45119574]},'+
      // '{"id":43919924,"customName":false,"name":"Счет VISA VIRTUON","productName":"Счет VISA VIRTUON","number":"40817810610224076201","state":"Открыт","stateCode":"open","amount":5.00,"type":"card","registryAmount":0,"registry2Amount":0,"balance":5.00,"currency":"RUB","availableBalance":5.00,"availBalanceRub":5.00,"startDate":"08.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=43919924","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":43919864,"cards":[43919925]},'+
      // '{"id":43912673,"customName":false,"name":"Счет VISA VIRTUON","productName":"Счет VISA VIRTUON","number":"40817810010224076199","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"08.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=43912673","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":43912601,"cards":[43912719]},'+
      // '{"id":43911986,"customName":false,"name":"Счет VISA VIRTUON","productName":"Счет VISA VIRTUON","number":"40817810710224076198","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"08.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=43911986","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":43911981,"cards":[43912098]},'+
      // '{"id":43799860,"customName":false,"name":"Счет VISA VIRTUON","productName":"Счет VISA VIRTUON","number":"40817810510224075865","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"07.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":false,"tariffPlanName":"Стандартный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=43799860","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":43799700,"cards":[43799861]},'+
      // '{"id":42814336,"customName":false,"name":"Счет MasterCard Gold","productName":"Счет MasterCard Gold","number":"40817810000016246820","state":"Открыт","stateCode":"open","amount":0,"type":"card","registryAmount":0,"registry2Amount":0,"balance":0,"currency":"RUB","availableBalance":0,"availBalanceRub":0,"startDate":"01.04.2020","order":99,"category":"account","requisites":{"bankName":"ФИЛИАЛ \"ДЕЛО\" ПАО \"СКБ-БАНК\"","address":"Куйбышева, 58","bic":"046577743","inn":"6608003052","kpp":"668543001","corrAccount":"30101810965770000743"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Карта на каждый день","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=42814336","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":42814331,"cards":[42814337]},'+
      // '{"id":42786730,"customName":false,"name":"Счет RUB","productName":"Счет RUB","number":"40817810900016246807","state":"Открыт","stateCode":"open","amount":29.04,"type":"current","registryAmount":0,"registry2Amount":0,"balance":29.04,"currency":"RUB","availableBalance":29.04,"availBalanceRub":29.04,"startDate":"01.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=42786730","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":42786723},'+
      // '{"id":42785820,"customName":true,"name":"Счет MasterCard Gold","productName":"Счет MasterCard Gold","number":"40817810600016246806","state":"Открыт","stateCode":"open","amount":268177.00,"type":"card","registryAmount":0,"registry2Amount":0,"balance":268177.00,"currency":"RUB","availableBalance":268177.00,"availBalanceRub":268177.00,"startDate":"01.04.2020","order":99,"category":"account","requisites":{"bankName":"ФИЛИАЛ \"ДЕЛО\" ПАО \"СКБ-БАНК\"","address":"Куйбышева, 58","bic":"046577743","inn":"6608003052","kpp":"668543001","corrAccount":"30101810965770000743"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Карта на каждый день","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=42785820","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":42785812,"cards":[42786733]},'+
      // '{"id":24183879,"customName":true,"name":"Счет RUB gh","productName":"Счет RUB","number":"40817810300015676311","state":"Открыт","stateCode":"open","amount":168.11,"type":"current","registryAmount":0,"registry2Amount":0,"balance":168.11,"currency":"RUB","availableBalance":168.11,"availBalanceRub":168.11,"startDate":"16.07.2019","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":false,"pdfLink":"/export/account/pdf?id=24183879","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":null},'+
      // '{"id":13517852,"customName":true,"name":"Счет VISA 2 ELECTRON3","productName":"Счет MIR DEBIT","number":"40817810500202337629","state":"Открыт","stateCode":"open","amount":2432.93,"type":"card","registryAmount":0,"registry2Amount":0,"balance":2449.43,"currency":"RUB","availableBalance":2432.93,"availBalanceRub":2432.93,"startDate":"10.01.2007","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Специальный+. Паке","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EV","mostActive":false,"pdfLink":"/export/account/pdf?id=13517852","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":0,"nextAccrualDate":null,"lockedAmount":0,"canClose":false,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":null,"cards":[24183877]}'+
      // '{"id":45315888,"customName":true,"name":"Счет MasterCard - Бонусный","productName":"Счет MasterCard Unembossed","number":"40817810600016255664","state":"Открыт","stateCode":"open","amount":503.00,"type":"current","registryAmount":0,"registry2Amount":0,"balance":503.00,"currency":"RUB","availableBalance":503.00,"availBalanceRub":503.00,"startDate":"16.04.2020","order":99,"category":"account","requisites":{"bankName":"ПАО \"СКБ-БАНК\"","address":"Россия, 624000, Свердловская обл, Сысертский р-н, Арамиль г, 1 Мая ул, д.59а","bic":"046577756","inn":"6608003052","kpp":"668501001","corrAccount":"30101810800000000756"},"allowInPayments":true,"allowOutPayments":true,"allowLoanRepayment":true,"tariffPlanName":"Универсальный","tariffPlanCode":"","tariffPlanLinkToRules":"","specType":"EX","mostActive":true,"pdfLink":"/export/account/pdf?id=45315888","overdraft":false,"sbpDefault":false,"bonusProgramState":"forbidden","availableBonuses":0,"accruedBonuses":150.00,"nextAccrualDate":null,"lockedAmount":0,"canClose":true,"bonusProgramGroup":{"firstCategory":"0","secondCategory":"0","thirdCategory":"0","selectCategoryDate":null},"petitionId":45315846},'+
    accountsStr =
      '['+
        '{'+
          '"id":45315888,'+
          '"customName":true,"name":"Счет MasterCard - Бонусный",'+
          '"name":"1111",'+
          '"number":"40817810600016255664"'+
        '},'+
        '{'+
          '"id":45315887,'+
          '"customName":true,"name":"Счет MasterCard - Бонусный",'+
          '"name":"2222",'+
          '"number":"40817810600016255665"'+
        '}'+
      ']';

    depositsStr =
      '['+
        '{"id":44109813,"bank_system_id":"16303548","contract_number":"10216642843","contract_date":"09.04.2020","close_account":"40817810500202337629","capitalization":false,"currency":"RUB","opening_balance":11111.00,"min_balance":10000.00,"balance":11111.00,"percentPaidPeriod":"В конце срока","duration":"277","open_date":"09.04.2020","end_date":"11.01.2021","early_close":false,"rate":5.8000,"ratePeriods":[],"balanceRub":11111.00,"account":"42305810310200268995","branch_id":56387,"allow_out_payments":false,"allow_in_payments":false,"percent_manageable":false,"capital_manageable":false,"percent_account":"42305810310200268995","auto_prolongation":false,"state":"open","state_description":"Действующий","customName":false,"name":"Исполнение желаний + (срочный вклад)","productName":"Исполнение желаний + (срочный вклад)","percent_paid":0.00,"percent_accrued":0.00,"petitionId":44109808},'+
        '{"id":43791355,"bank_system_id":"16293956","contract_number":"10216642829","contract_date":"07.04.2020","close_account":"40817810500202337629","capitalization":false,"currency":"RUB","opening_balance":10010.00,"min_balance":10000.00,"balance":10010.00,"percentPaidPeriod":"В конце срока","duration":"279","open_date":"07.04.2020","end_date":"11.01.2021","early_close":false,"rate":5.8000,"ratePeriods":[],"balanceRub":10010.00,"account":"42305810110200268234","branch_id":56387,"allow_out_payments":false,"allow_in_payments":false,"percent_manageable":false,"capital_manageable":false,"percent_account":"42305810110200268234","auto_prolongation":false,"state":"open","state_description":"Действующий","customName":true,"name":"Исполнение желаний + (срочный вклад)2","productName":"Исполнение желаний + (срочный вклад)","percent_paid":0.00,"percent_accrued":0.00,"petitionId":43791292},'+
        '{"id":43784243,"bank_system_id":"16293954","contract_number":"10216642827","contract_date":"07.04.2020","close_account":"40817810600016246806","capitalization":false,"currency":"RUB","opening_balance":10000.00,"min_balance":10000.00,"balance":10000.00,"percentPaidPeriod":"В конце срока","duration":"279","open_date":"07.04.2020","end_date":"11.01.2021","early_close":false,"rate":5.8000,"ratePeriods":[],"balanceRub":10000.00,"account":"42305810810200268233","branch_id":56387,"allow_out_payments":false,"allow_in_payments":false,"percent_manageable":false,"capital_manageable":false,"percent_account":"42305810810200268233","auto_prolongation":false,"state":"open","state_description":"Действующий","customName":false,"name":"Исполнение желаний + (срочный вклад)","productName":"Исполнение желаний + (срочный вклад)","percent_paid":0.00,"percent_accrued":0.00,"petitionId":43784237},'+
        '{"id":24511990,"bank_system_id":"14896294","contract_number":"21561489629","contract_date":"13.03.2019","close_account":"40817810500202337629","capitalization":false,"currency":"RUB","opening_balance":1184.50,"min_balance":1000.00,"balance":1184.50,"percentPaidPeriod":"Ежемесячно","duration":"1080","open_date":"13.03.2019","end_date":"25.02.2022","early_close":false,"rate":4.0000,"ratePeriods":[{"fromDay":1,"rate":6.7,"toDay":365},{"fromDay":366,"rate":4.0,"toDay":730},{"fromDay":731,"rate":2.0,"toDay":1080}],"balanceRub":1184.50,"account":"42306810110220325910","branch_id":56387,"allow_out_payments":true,"allow_in_payments":true,"percent_manageable":false,"capital_manageable":false,"percent_account":"40817810500202337629","auto_prolongation":false,"state":"open","state_description":"Действующий","customName":true,"name":"Вклад, с которого нужно переводить","productName":"Пенсионный (срочный вклад)","percent_paid":1639.45,"percent_accrued":0.00,"petitionId":null},'+
        '{"id":24511989,"bank_system_id":"3205631","contract_number":"13205631","contract_date":"25.11.2010","close_account":null,"capitalization":false,"currency":"RUB","opening_balance":0.06,"min_balance":0.00,"balance":0.06,"percentPaidPeriod":"Ежеквартально","duration":null,"open_date":"25.11.2010","end_date":null,"early_close":false,"rate":0.0100,"ratePeriods":[],"balanceRub":0.06,"account":"42301810110201323826","branch_id":56387,"allow_out_payments":true,"allow_in_payments":true,"percent_manageable":false,"capital_manageable":false,"percent_account":"42301810110201323826","auto_prolongation":false,"state":"open","state_description":"Действующий","customName":false,"name":"Вклад до востребования","productName":"Вклад до востребования","percent_paid":0.06,"percent_accrued":0.00,"petitionId":null}'+
      ']';


    // tslint:disable-next-line: max-line-length
    // strJSON = '{'+
    //   '"accounts":'+

    //   '"cards":'+

    //   '"loans":'+
    //     '['+
    //       '{'+
    //         '"id":24183882,'+
    //         '"bank_system_id":"15175884",'+
    //         '"productName":"«Простой и удобный» (ГЭБ)",'+
    //         '"productCode":"2550",'+
    //         '"customName":false,'+
    //         '"name":"«Простой и удобный» (ГЭБ)",'+
    //         '"amount":376700.00,'+
    //         '"currency":"RUB",'+
    //         '"interestRate":17.50,'+
    //         '"psk":17.486,'+
    //         '"contractDate":"16.07.2019",'+
    //         '"contractNumber":"25501517588",'+
    //         '"openDate":"16.07.2019",'+
    //         '"endDate":"16.07.2024",'+
    //         '"allowPaymentAmount":345425.74,'+
    //         '"partialPaymentDate":null,'+
    //         '"planPaymentAmount":null,'+
    //         '"mainAccount":"10098810610200010263",'+
    //         '"repaymentAccount":"40817810300015676311",'+
    //         '"recommendedPaymentAmount":0.00,'+
    //         '"partialPaymentAmount":null,'+
    //         '"prepayment":true,'+
    //         '"overdueDebtAmount":0,'+
    //         '"overdraft":false,'+
    //         '"startPaymentPeriod":null,'+
    //         '"gracePeriodDate":null,'+
    //         '"creditLimit":null,'+
    //         '"availableLimit":null,'+
    //         '"prepaymentApplication":true,'+
    //         '"changeDate":true,'+
    //         '"ownFounds":null,'+
    //         '"changeRepaymentAccount":false,'+
    //         '"partialPaymentMarker":false,'+
    //         '"reduceLimit":false,'+
    //         '"closeLimit":false,'+
    //         '"prepaymentAmount":null,'+
    //         '"prepaymentId":null,'+
    //         '"prepaymentType":null,'+
    //         '"loanHolder":"\"АО",'+
    //         '"minLimit":null'+
    //       '}'+
    //     '],'+
    //   '"deposits":'+

    //   '}';


    constructor(
      private appService: AppService,
    ) {
      appService.sessionState$.subscribe(sessionState => {
        if (sessionState === 'logged') {
          this.updateProducts();
        }
        if (sessionState !== 'logged') {
          this.clearProducts();
        }
      });
    }

    updateProducts() {
      setTimeout(() => {
        this.externalCards.next(JSON.parse(this.externalCardsStr));
        this.accounts.next(JSON.parse(this.accountsStr));
        this.cards.next(JSON.parse(this.cardsStr));
        this.deposits.next(JSON.parse(this.depositsStr));
      }, 200);
    }

    productFromCategory(category: string): any[] {
      switch (category) {
          case 'card':
              return this.getCards();
          case 'deposit':
              return this.deposits.getValue();
          case 'loan':
              return this.getLoans();
          case 'extCard':
              return this.getExternalCards();
          default:
              return this.getAccounts();
      }
  }

  getProducts(category: string, lambda = acc => true) {
      const products = this.productFromCategory(category);
      return products.filter(lambda);
  }

  getAccounts(): any[] {
      return this.accounts.getValue() || [];
  }

  getCards(): any[] {
      return this.cards.getValue() || [];
  }

  getExternalCards(): any[] {
      return this.externalCards.getValue() || [];
  }

  getLoans(): any[] {
      return this.loans.getValue() || [];
  }

  clearProducts(): void {
    this.accounts.next(null);
    this.cards.next(null);
    this.externalCards.next(null);
    this.deposits.next(null);
    this.loans.next(null);
  }

  getCardsByNumber(num: string): any[] | null {
    const ret = this.getCards().filter(item => item.number === num);
    if (ret) {
        return ret as any[];
    }
    return null;
  }
}
